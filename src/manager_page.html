<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <title>Main Page</title>
  <link rel="stylesheet" href="user_page.css">
</head>
<body>
  <img id="userImage" alt="User Image" src="newuser.png" class="userPicture">
  <div class="banner">
    <h1 id="dataDisplay"></h1>
    
  </div>
  
  <div class="container">
    <h2>Main Content</h2>
    <p>This is the main content of your webpage contained within a container.</p>
    <p>Content Goes Here</p>
  </div>

  <script type="module">

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
  import { getDatabase, set, ref, update, get } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";
  const firebaseConfig = {
          apiKey: "AIzaSyCjKjeEiIpaLybLGQzoPlnGp1D6XYuh8Lw",
          authDomain: "swe4713temp.firebaseapp.com",
          databaseURL: "https://swe4713temp-default-rtdb.firebaseio.com",
          projectId: "swe4713temp",
          storageBucket: "swe4713temp.appspot.com",
          messagingSenderId: "1067050664646",
          appId: "1:1067050664646:web:c07f85156618fcbb59cdc7",
          measurementId: "G-7L55RX7DM3"
        };

    // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase();  // Initialize the Firebase database

  async function getUserData(uid) {
    const userRef = ref(database, 'users/' + uid);
    const snapshot = await get(userRef);
    if (snapshot.exists()) {
      const userData = snapshot.val();
      return userData.username;
    } else {
      return null;
    }
  }

  async function displayUserData() {
    const uid = getDataFromQuery();  // Assuming the user.uid is passed as a parameter
    if (uid) {
      const username = await getUserData(uid);
      if (username) {
        document.getElementById('dataDisplay').innerText = 'Manager:' + username;

        document.getElementById('userImage').style.display = 'block'; // Show userImage

      } else {
        document.getElementById('dataDisplay').innerText = 'User not found.';

        document.getElementById('userImage').style.display = 'none'; // hide userImage
      }
    } else {
      document.getElementById('dataDisplay').innerText = 'No user UID passed.';

      document.getElementById('userImage').style.display = 'none'; // hide userImage
    }
  }

  function getDataFromQuery() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('data');  // Assuming 'data' is the parameter for user.uid
  }

  displayUserData();

  </script>
</body>
</html>